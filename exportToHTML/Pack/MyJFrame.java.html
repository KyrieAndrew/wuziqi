<html>
<head>
<title>MyJFrame.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #6897bb;}
.s3 { color: #808080;}
.s4 { color: #6a8759;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
MyJFrame.java</font>
</center></td></tr></table>
<pre><span class="s0">package </span><span class="s1">Pack</span><span class="s0">;</span>


<span class="s0">import </span><span class="s1">javax.imageio.ImageIO</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">javax.swing.*</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">java.awt.*</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">java.awt.event.MouseEvent</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">java.awt.event.MouseListener</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">java.awt.image.BufferedImage</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">java.io.File</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">java.io.IOException</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">javax.swing.ImageIcon</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">javax.swing.JFrame</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">javax.swing.JLabel</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">javax.swing.JPanel</span><span class="s0">;</span>


<span class="s0">public class </span><span class="s1">MyJFrame </span><span class="s0">extends </span><span class="s1">JFrame </span><span class="s0">implements </span><span class="s1">MouseListener {</span>
    <span class="s0">int </span><span class="s1">qx = </span><span class="s2">20</span><span class="s0">, </span><span class="s1">qy = </span><span class="s2">40</span><span class="s0">, </span><span class="s1">qw = </span><span class="s2">490</span><span class="s0">, </span><span class="s1">qh = </span><span class="s2">490</span><span class="s0">; </span><span class="s3">//棋盘位置、宽高</span>
    <span class="s0">int </span><span class="s1">bw = </span><span class="s2">150</span><span class="s0">, </span><span class="s1">bh = </span><span class="s2">50</span><span class="s0">, </span><span class="s1">bx = </span><span class="s2">570</span><span class="s0">, </span><span class="s1">by = </span><span class="s2">150</span><span class="s0">; </span><span class="s3">//按钮宽高、位置</span>
    <span class="s0">int </span><span class="s1">x = </span><span class="s2">0</span><span class="s0">, </span><span class="s1">y = </span><span class="s2">0</span><span class="s0">; </span><span class="s3">//保存棋子坐标</span>
    <span class="s0">int</span><span class="s1">[][] SaveGame = </span><span class="s0">new int</span><span class="s1">[</span><span class="s2">15</span><span class="s1">][</span><span class="s2">15</span><span class="s1">]</span><span class="s0">; </span><span class="s3">//保存每个棋子</span>
    <span class="s0">int </span><span class="s1">qc = </span><span class="s2">1</span><span class="s0">;</span><span class="s3">//记录白棋=2，黑棋=1</span>
    <span class="s0">int </span><span class="s1">qn = </span><span class="s2">0</span><span class="s0">;</span><span class="s3">//判断棋子是否重复</span>
    <span class="s0">boolean </span><span class="s1">canplay = </span><span class="s0">true; </span><span class="s3">//判断游戏是否开始和结束</span>
    <span class="s1">String go = </span><span class="s4">&quot;黑子先行&quot;</span><span class="s0">; </span><span class="s3">//游戏信息</span>
    <span class="s0">int </span><span class="s1">bq = </span><span class="s2">0</span><span class="s0">, </span><span class="s1">hq = </span><span class="s2">0</span><span class="s0">;</span>
    <span class="s0">private </span><span class="s1">Object Image</span><span class="s0">;</span>


    <span class="s0">public </span><span class="s1">MyJFrame() {</span>
        <span class="s3">//设置标题</span>
        <span class="s0">super</span><span class="s1">(</span><span class="s4">&quot;JFram设置背景图片(Cannel_2020)&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s3">//设置大小</span>
        <span class="s1">setSize(</span><span class="s2">800</span><span class="s0">, </span><span class="s2">550</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s3">//设置位置</span>
        <span class="s1">setLocation(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s3">//背景图片的路径。（相对路径或者绝对路径。本例图片放于&quot;java项目名&quot;的文件下）</span>
        <span class="s1">String path = </span><span class="s4">&quot;D:</span><span class="s0">\\</span><span class="s4">JavaLearning</span><span class="s0">\\</span><span class="s4">xinan.jpeg&quot;</span><span class="s0">;</span>
        <span class="s3">// 背景图片</span>
        <span class="s1">ImageIcon background = </span><span class="s0">new </span><span class="s1">ImageIcon(path)</span><span class="s0">;</span>
        <span class="s3">// 把背景图片显示在一个标签里面</span>
        <span class="s1">JLabel label = </span><span class="s0">new </span><span class="s1">JLabel(background)</span><span class="s0">;</span>
        <span class="s3">// 把标签的大小位置设置为图片刚好填充整个面板</span>
        <span class="s1">label.setBounds(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, this</span><span class="s1">.getWidth()</span><span class="s0">, this</span><span class="s1">.getHeight())</span><span class="s0">;</span>
        <span class="s3">// 把内容窗格转化为JPanel，否则不能用方法setOpaque()来使内容窗格透明</span>
        <span class="s1">JPanel imagePanel = (JPanel) </span><span class="s0">this</span><span class="s1">.getContentPane()</span><span class="s0">;</span>
        <span class="s1">imagePanel.setOpaque(</span><span class="s0">false</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s3">// 把背景图片添加到分层窗格的最底层作为背景</span>
        <span class="s0">this</span><span class="s1">.getLayeredPane().add(label)</span><span class="s0">;</span>
        <span class="s3">//设置可见</span>
        <span class="s1">setVisible(</span><span class="s0">true</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s3">//点关闭按钮时退出</span>
        <span class="s1">setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)</span><span class="s0">;</span>


    <span class="s1">}</span>

    <span class="s0">public static void </span><span class="s1">main(String[] args) {</span>
        <span class="s0">new </span><span class="s1">MyJFrame()</span><span class="s0">;</span>
    <span class="s1">}</span>


    <span class="s3">//---------------------------------------------------------------------------------------------------------------------</span>
    <span class="s3">//窗体</span>
    <span class="s0">public void </span><span class="s1">myJFrame() {</span>

        <span class="s0">this</span><span class="s1">.setTitle(</span><span class="s4">&quot;五子棋&quot;</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//标题</span>
        <span class="s0">this</span><span class="s1">.setSize(</span><span class="s2">800</span><span class="s0">, </span><span class="s2">550</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//窗口大小</span>
        <span class="s0">this</span><span class="s1">.setResizable(</span><span class="s0">false</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//窗口是否可以改变大小=否</span>
        <span class="s0">this</span><span class="s1">.setDefaultCloseOperation(MyJFrame.EXIT_ON_CLOSE)</span><span class="s0">; </span><span class="s3">//窗口关闭方式为关闭窗口同时结束程序</span>

        <span class="s0">int </span><span class="s1">width = Toolkit.getDefaultToolkit().getScreenSize().width</span><span class="s0">; </span><span class="s3">//获取屏幕宽度</span>
        <span class="s0">int </span><span class="s1">height = Toolkit.getDefaultToolkit().getScreenSize().height</span><span class="s0">; </span><span class="s3">//获取屏幕高度</span>
<span class="s3">//        System.out.println(&quot;宽度：&quot;+width);//测试</span>
<span class="s3">//        System.out.println(&quot;高度：&quot;+height);//测试</span>

        <span class="s0">this</span><span class="s1">.setLocation((width - </span><span class="s2">800</span><span class="s1">) / </span><span class="s2">2</span><span class="s0">, </span><span class="s1">(height - </span><span class="s2">600</span><span class="s1">) / </span><span class="s2">2</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//设置窗口默认位置以屏幕居中</span>

        <span class="s0">this</span><span class="s1">.addMouseListener(</span><span class="s0">this</span><span class="s1">)</span><span class="s0">;</span>

        <span class="s0">this</span><span class="s1">.setVisible(</span><span class="s0">true</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//窗口是否显示=是</span>
    <span class="s1">}</span>

    <span class="s0">public class </span><span class="s1">Position {</span>
        <span class="s0">int </span><span class="s1">listx</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">listy</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">public class </span><span class="s1">chessUI </span><span class="s0">extends </span><span class="s1">JPanel {</span>
        <span class="s0">public </span><span class="s1">Position[] ps = </span><span class="s0">new </span><span class="s1">Position[</span><span class="s2">300</span><span class="s1">]</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">i</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s1">chessUI ui = </span><span class="s0">new </span><span class="s1">chessUI()</span><span class="s0">;</span>
    <span class="s1">Position p = </span><span class="s0">new </span><span class="s1">Position()</span><span class="s0">;</span>


    <span class="s3">//---------------------------------------------------------------------------------------------------------------------</span>
    <span class="s3">//覆写paint方法,绘制界面</span>
    <span class="s0">public void </span><span class="s1">paint(Graphics g) {</span>

        <span class="s3">//双缓冲技术防止屏幕闪烁</span>
        <span class="s1">BufferedImage bi = </span><span class="s0">new </span><span class="s1">BufferedImage(</span><span class="s2">800</span><span class="s0">, </span><span class="s2">550</span><span class="s0">, </span><span class="s1">BufferedImage.TYPE_INT_ARGB)</span><span class="s0">;</span>
        <span class="s1">Graphics g2 = bi.createGraphics()</span><span class="s0">;</span>

        <span class="s3">//获取图片路径</span>
        <span class="s1">BufferedImage image = </span><span class="s0">null;</span>
        <span class="s0">try </span><span class="s1">{</span>
            <span class="s3">//获取项目文件夹路径</span>
            <span class="s1">File directory = </span><span class="s0">new </span><span class="s1">File(</span><span class="s4">&quot;D:</span><span class="s0">\\</span><span class="s4">JavaLearning&quot;</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s3">//路径拼接</span>
            <span class="s1">image = ImageIO.read(</span><span class="s0">new </span><span class="s1">File(directory.getAbsolutePath() + </span><span class="s4">&quot;/tubian.jfif&quot;</span><span class="s1">))</span><span class="s0">;</span>


        <span class="s1">} </span><span class="s0">catch </span><span class="s1">(IOException e) {</span>
            <span class="s1">e.printStackTrace()</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s1">g2.drawImage(image</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, this</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//显示图片</span>

        <span class="s1">g2.setColor(Color.BLACK)</span><span class="s0">;</span><span class="s3">//设置画笔颜色</span>
        <span class="s1">g2.setFont(</span><span class="s0">new </span><span class="s1">Font(</span><span class="s4">&quot;微软雅黑&quot;</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">50</span><span class="s1">))</span><span class="s0">; </span><span class="s3">//设置字体</span>
        <span class="s1">g2.drawString(</span><span class="s4">&quot;五子棋&quot;</span><span class="s0">, </span><span class="s2">575</span><span class="s0">, </span><span class="s2">100</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//绘制字符</span>

        <span class="s3">//棋盘</span>
        <span class="s1">g2.setColor(Color.getHSBColor(</span><span class="s2">30</span><span class="s0">, </span><span class="s1">(</span><span class="s0">float</span><span class="s1">) </span><span class="s2">0.10</span><span class="s0">, </span><span class="s1">(</span><span class="s0">float</span><span class="s1">) </span><span class="s2">0.90</span><span class="s1">))</span><span class="s0">; </span><span class="s3">//设置画笔颜色</span>
        <span class="s1">g2.fillRect(qx</span><span class="s0">, </span><span class="s1">qy</span><span class="s0">, </span><span class="s1">qw</span><span class="s0">, </span><span class="s1">qh)</span><span class="s0">; </span><span class="s3">//绘制棋盘背景矩形</span>

        <span class="s3">//开始按钮</span>
        <span class="s1">g2.setColor(Color.WHITE)</span><span class="s0">; </span><span class="s3">//设置画笔颜色</span>
        <span class="s1">g2.fillRect(bx</span><span class="s0">, </span><span class="s1">by</span><span class="s0">, </span><span class="s1">bw</span><span class="s0">, </span><span class="s1">bh)</span><span class="s0">; </span><span class="s3">//绘制开始按钮</span>
        <span class="s1">g2.setFont(</span><span class="s0">new </span><span class="s1">Font(</span><span class="s4">&quot;微软雅黑&quot;</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">30</span><span class="s1">))</span><span class="s0">; </span><span class="s3">//设置字体</span>
        <span class="s1">g2.setColor(Color.black)</span><span class="s0">; </span><span class="s3">//设置画笔颜色</span>
        <span class="s1">g2.drawString(</span><span class="s4">&quot;开始&quot;</span><span class="s0">, </span><span class="s2">615</span><span class="s0">, </span><span class="s2">185</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//绘制字符</span>

        <span class="s3">//悔棋按钮</span>
        <span class="s1">g2.setColor(Color.LIGHT_GRAY)</span><span class="s0">; </span><span class="s3">//设置画笔颜色</span>
        <span class="s1">g2.fillRect(bx</span><span class="s0">, </span><span class="s1">by + </span><span class="s2">60</span><span class="s0">, </span><span class="s1">bw</span><span class="s0">, </span><span class="s1">bh)</span><span class="s0">; </span><span class="s3">//绘制悔棋按钮</span>
        <span class="s1">g2.setFont(</span><span class="s0">new </span><span class="s1">Font(</span><span class="s4">&quot;微软雅黑&quot;</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">30</span><span class="s1">))</span><span class="s0">; </span><span class="s3">//设置字体</span>
        <span class="s1">g2.setColor(Color.WHITE)</span><span class="s0">; </span><span class="s3">//设置画笔颜色</span>
        <span class="s1">g2.drawString(</span><span class="s4">&quot;悔棋&quot;</span><span class="s0">, </span><span class="s2">615</span><span class="s0">, </span><span class="s2">245</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//绘制字符</span>

        <span class="s3">//认输按钮</span>
        <span class="s1">g2.setColor(Color.GRAY)</span><span class="s0">; </span><span class="s3">//设置画笔颜色</span>
        <span class="s1">g2.fillRect(bx</span><span class="s0">, </span><span class="s1">by + </span><span class="s2">120</span><span class="s0">, </span><span class="s1">bw</span><span class="s0">, </span><span class="s1">bh)</span><span class="s0">; </span><span class="s3">//绘制认输按钮</span>
        <span class="s1">g2.setFont(</span><span class="s0">new </span><span class="s1">Font(</span><span class="s4">&quot;微软雅黑&quot;</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">30</span><span class="s1">))</span><span class="s0">; </span><span class="s3">//设置字体</span>
        <span class="s1">g2.setColor(Color.WHITE)</span><span class="s0">; </span><span class="s3">//设置画笔颜色</span>
        <span class="s1">g2.drawString(</span><span class="s4">&quot;认输&quot;</span><span class="s0">, </span><span class="s2">615</span><span class="s0">, </span><span class="s2">305</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//绘制字符</span>

        <span class="s3">//游戏信息栏</span>
        <span class="s1">g2.setColor(Color.getHSBColor(</span><span class="s2">30</span><span class="s0">, </span><span class="s1">(</span><span class="s0">float</span><span class="s1">) </span><span class="s2">0.50</span><span class="s0">, </span><span class="s1">(</span><span class="s0">float</span><span class="s1">) </span><span class="s2">0.50</span><span class="s1">))</span><span class="s0">; </span><span class="s3">//设置画笔颜色</span>
        <span class="s1">g2.fillRect(</span><span class="s2">550</span><span class="s0">, </span><span class="s2">350</span><span class="s0">, </span><span class="s2">200</span><span class="s0">, </span><span class="s2">100</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//绘制游戏状态区域</span>
        <span class="s1">g2.setColor(Color.WHITE)</span><span class="s0">; </span><span class="s3">//设置画笔颜色</span>
        <span class="s1">g2.setFont(</span><span class="s0">new </span><span class="s1">Font(</span><span class="s4">&quot;微软雅黑&quot;</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span><span class="s0">; </span><span class="s3">//设置字体</span>
        <span class="s1">g2.drawString(</span><span class="s4">&quot;游戏信息&quot;</span><span class="s0">, </span><span class="s2">610</span><span class="s0">, </span><span class="s2">380</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//绘制字符</span>
        <span class="s1">g2.drawString(go</span><span class="s0">, </span><span class="s2">610</span><span class="s0">, </span><span class="s2">410</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//绘制字符</span>


        <span class="s1">g2.setColor(Color.BLACK)</span><span class="s0">; </span><span class="s3">//设置画笔颜色</span>

        <span class="s3">//绘制棋盘格线</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">x = </span><span class="s2">0</span><span class="s0">; </span><span class="s1">x &lt;= qw</span><span class="s0">; </span><span class="s1">x += </span><span class="s2">35</span><span class="s1">) {</span>
            <span class="s1">g2.drawLine(qx</span><span class="s0">, </span><span class="s1">x + qy</span><span class="s0">, </span><span class="s1">qw + qx</span><span class="s0">, </span><span class="s1">x + qy)</span><span class="s0">; </span><span class="s3">//绘制一条横线</span>
            <span class="s1">g2.drawLine(x + qx</span><span class="s0">, </span><span class="s1">qy</span><span class="s0">, </span><span class="s1">x + qx</span><span class="s0">, </span><span class="s1">qh + qy)</span><span class="s0">; </span><span class="s3">//绘制一条竖线</span>
        <span class="s1">}</span>

        <span class="s3">//绘制标注点</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s2">3</span><span class="s0">; </span><span class="s1">i &lt;= </span><span class="s2">11</span><span class="s0">; </span><span class="s1">i += </span><span class="s2">4</span><span class="s1">) {</span>
            <span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">y = </span><span class="s2">3</span><span class="s0">; </span><span class="s1">y &lt;= </span><span class="s2">11</span><span class="s0">; </span><span class="s1">y += </span><span class="s2">4</span><span class="s1">) {</span>
                <span class="s1">g2.fillOval(</span><span class="s2">35 </span><span class="s1">* i + qx - </span><span class="s2">3</span><span class="s0">, </span><span class="s2">35 </span><span class="s1">* y + qy - </span><span class="s2">3</span><span class="s0">, </span><span class="s2">6</span><span class="s0">, </span><span class="s2">6</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//绘制实心圆</span>
            <span class="s1">}</span>
        <span class="s1">}</span>


        <span class="s3">//绘制棋子</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s2">0</span><span class="s0">; </span><span class="s1">i &lt; </span><span class="s2">15</span><span class="s0">; </span><span class="s1">i++) {</span>
            <span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">j = </span><span class="s2">0</span><span class="s0">; </span><span class="s1">j &lt; </span><span class="s2">15</span><span class="s0">; </span><span class="s1">j++) {</span>
                <span class="s0">if </span><span class="s1">(SaveGame[i][j] == </span><span class="s2">1</span><span class="s1">) </span><span class="s3">//黑子</span>
                <span class="s1">{</span>
                    <span class="s0">int </span><span class="s1">sx = i * </span><span class="s2">35 </span><span class="s1">+ qx</span><span class="s0">;</span>
                    <span class="s0">int </span><span class="s1">sy = j * </span><span class="s2">35 </span><span class="s1">+ qy</span><span class="s0">;</span>
                    <span class="s1">g2.setColor(Color.BLACK)</span><span class="s0">;</span>
                    <span class="s1">g2.fillOval(sx - </span><span class="s2">13</span><span class="s0">, </span><span class="s1">sy - </span><span class="s2">13</span><span class="s0">, </span><span class="s2">26</span><span class="s0">, </span><span class="s2">26</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//绘制实心圆</span>
                    <span class="s1">hq++</span><span class="s0">;</span>
                <span class="s1">}</span>
                <span class="s0">if </span><span class="s1">(SaveGame[i][j] == </span><span class="s2">2</span><span class="s1">) </span><span class="s3">//白子</span>
                <span class="s1">{</span>
                    <span class="s0">int </span><span class="s1">sx = i * </span><span class="s2">35 </span><span class="s1">+ qx</span><span class="s0">;</span>
                    <span class="s0">int </span><span class="s1">sy = j * </span><span class="s2">35 </span><span class="s1">+ qy</span><span class="s0">;</span>
                    <span class="s1">g2.setColor(Color.WHITE)</span><span class="s0">;</span>
                    <span class="s1">g2.fillOval(sx - </span><span class="s2">13</span><span class="s0">, </span><span class="s1">sy - </span><span class="s2">13</span><span class="s0">, </span><span class="s2">26</span><span class="s0">, </span><span class="s2">26</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//绘制实心圆</span>
                    <span class="s1">g2.setColor(Color.BLACK)</span><span class="s0">;</span>
                    <span class="s1">g2.drawOval(sx - </span><span class="s2">13</span><span class="s0">, </span><span class="s1">sy - </span><span class="s2">13</span><span class="s0">, </span><span class="s2">26</span><span class="s0">, </span><span class="s2">26</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//绘制空心圆</span>
                    <span class="s1">bq++</span><span class="s0">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s1">g.drawImage(bi</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, this</span><span class="s1">)</span><span class="s0">;</span>


<span class="s3">//        g.drawRect(20, 20, 20, 20);//绘制空心矩形</span>
    <span class="s1">}</span>


    <span class="s3">//---------------------------------------------------------------------------------------------------------------------</span>
    <span class="s3">//判断输赢</span>
    <span class="s0">private boolean </span><span class="s1">WinLose() {</span>
        <span class="s0">boolean </span><span class="s1">flag = </span><span class="s0">false; </span><span class="s3">//输赢</span>
        <span class="s0">int </span><span class="s1">count = </span><span class="s2">1</span><span class="s0">; </span><span class="s3">//相连数</span>
        <span class="s0">int </span><span class="s1">color = SaveGame[x][y]</span><span class="s0">; </span><span class="s3">//记录棋子颜色</span>

        <span class="s3">//判断横向棋子是否相连</span>
        <span class="s0">int </span><span class="s1">i = </span><span class="s2">1</span><span class="s0">; </span><span class="s3">//迭代数</span>
        <span class="s0">while </span><span class="s1">(color == SaveGame[x + i][y]) {</span>
            <span class="s1">count++</span><span class="s0">;</span>
            <span class="s1">i++</span><span class="s0">;</span>
        <span class="s1">}</span>

        <span class="s1">i = </span><span class="s2">1</span><span class="s0">; </span><span class="s3">//迭代数</span>
        <span class="s0">while </span><span class="s1">(color == SaveGame[x - i][y]) {</span>
            <span class="s1">count++</span><span class="s0">;</span>
            <span class="s1">i++</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">if </span><span class="s1">(count &gt;= </span><span class="s2">5</span><span class="s1">) {</span>
            <span class="s1">flag = </span><span class="s0">true;</span>
        <span class="s1">}</span>


        <span class="s3">//判断纵向棋子是否相连</span>
        <span class="s1">count = </span><span class="s2">1</span><span class="s0">;</span>
        <span class="s1">i = </span><span class="s2">1</span><span class="s0">; </span><span class="s3">//迭代数</span>
        <span class="s0">while </span><span class="s1">(color == SaveGame[x][y + i]) {</span>
            <span class="s1">count++</span><span class="s0">;</span>
            <span class="s1">i++</span><span class="s0">;</span>
        <span class="s1">}</span>

        <span class="s1">i = </span><span class="s2">1</span><span class="s0">; </span><span class="s3">//迭代数</span>
        <span class="s0">while </span><span class="s1">(color == SaveGame[x][y - i]) {</span>
            <span class="s1">count++</span><span class="s0">;</span>
            <span class="s1">i++</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">if </span><span class="s1">(count &gt;= </span><span class="s2">5</span><span class="s1">) {</span>
            <span class="s1">flag = </span><span class="s0">true;</span>
        <span class="s1">}</span>


        <span class="s3">//判断斜向棋子是否相连（左上右下）</span>
        <span class="s1">count = </span><span class="s2">1</span><span class="s0">;</span>
        <span class="s1">i = </span><span class="s2">1</span><span class="s0">; </span><span class="s3">//迭代数</span>
        <span class="s0">while </span><span class="s1">(color == SaveGame[x - i][y - i]) {</span>
            <span class="s1">count++</span><span class="s0">;</span>
            <span class="s1">i++</span><span class="s0">;</span>
        <span class="s1">}</span>

        <span class="s1">i = </span><span class="s2">1</span><span class="s0">; </span><span class="s3">//迭代数</span>
        <span class="s0">while </span><span class="s1">(color == SaveGame[x + i][y + i]) {</span>
            <span class="s1">count++</span><span class="s0">;</span>
            <span class="s1">i++</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">if </span><span class="s1">(count &gt;= </span><span class="s2">5</span><span class="s1">) {</span>
            <span class="s1">flag = </span><span class="s0">true;</span>
        <span class="s1">}</span>


        <span class="s3">//判断斜向棋子是否相连（左下右上）</span>
        <span class="s1">count = </span><span class="s2">1</span><span class="s0">;</span>
        <span class="s1">i = </span><span class="s2">1</span><span class="s0">; </span><span class="s3">//迭代数</span>
        <span class="s0">while </span><span class="s1">(color == SaveGame[x + i][y - i]) {</span>
            <span class="s1">count++</span><span class="s0">;</span>
            <span class="s1">i++</span><span class="s0">;</span>
        <span class="s1">}</span>

        <span class="s1">i = </span><span class="s2">1</span><span class="s0">; </span><span class="s3">//迭代数</span>
        <span class="s0">while </span><span class="s1">(color == SaveGame[x - i][y + i]) {</span>
            <span class="s1">count++</span><span class="s0">;</span>
            <span class="s1">i++</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">if </span><span class="s1">(count &gt;= </span><span class="s2">5</span><span class="s1">) {</span>
            <span class="s1">flag = </span><span class="s0">true;</span>
        <span class="s1">}</span>

        <span class="s0">return </span><span class="s1">flag</span><span class="s0">;</span>
    <span class="s1">}</span>


    <span class="s3">//---------------------------------------------------------------------------------------------------------------------</span>
    <span class="s3">//初始化游戏</span>
    <span class="s0">public void </span><span class="s1">Initialize() {</span>
        <span class="s3">//遍历并初始化数组</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s2">0</span><span class="s0">; </span><span class="s1">i &lt; </span><span class="s2">15</span><span class="s0">; </span><span class="s1">i++) {</span>
            <span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">j = </span><span class="s2">0</span><span class="s0">; </span><span class="s1">j &lt; </span><span class="s2">15</span><span class="s0">; </span><span class="s1">j++) {</span>
                <span class="s1">SaveGame[i][j] = </span><span class="s2">0</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s3">//黑子先行</span>
        <span class="s1">qc = </span><span class="s2">1</span><span class="s0">;</span>
        <span class="s1">go = </span><span class="s4">&quot;轮到黑子&quot;</span><span class="s0">;</span>
    <span class="s1">}</span>


    <span class="s3">//---------------------------------------------------------------------------------------------------------------------</span>
    <span class="s1">@Override </span><span class="s3">//鼠标点击</span>
    <span class="s0">public void </span><span class="s1">mouseClicked(MouseEvent e) {</span>

    <span class="s1">}</span>

    <span class="s1">@Override </span><span class="s3">//鼠标按下</span>
    <span class="s0">public void </span><span class="s1">mousePressed(MouseEvent e) {</span>
        <span class="s3">//判断是否已开始游戏</span>
        <span class="s0">if </span><span class="s1">(canplay) {</span>
            <span class="s3">//获取鼠标点击位置</span>
            <span class="s1">x = e.getX()</span><span class="s0">;</span>
            <span class="s1">y = e.getY()</span><span class="s0">;</span>

            <span class="s1">ui.ps[ui.i] = p</span><span class="s0">;</span>
            <span class="s3">//判断点击是否为棋盘内</span>
            <span class="s0">if </span><span class="s1">(x &gt; qx &amp;&amp; x &lt; qx + qw &amp;&amp; y &gt; qy &amp;&amp; y &lt; qy + qh) {</span>
                <span class="s3">//计算点击位置最近的点</span>
                <span class="s0">if </span><span class="s1">((x - qx) % </span><span class="s2">35 </span><span class="s1">&gt; </span><span class="s2">17</span><span class="s1">) {</span>
                    <span class="s1">x = (x - qx) / </span><span class="s2">35 </span><span class="s1">+ </span><span class="s2">1</span><span class="s0">;</span>
                <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
                    <span class="s1">x = (x - qx) / </span><span class="s2">35</span><span class="s0">;</span>
                <span class="s1">}</span>
                <span class="s0">if </span><span class="s1">((y - qy) % </span><span class="s2">35 </span><span class="s1">&gt; </span><span class="s2">17</span><span class="s1">) {</span>
                    <span class="s1">y = (y - qy) / </span><span class="s2">35 </span><span class="s1">+ </span><span class="s2">1</span><span class="s0">;</span>
                <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
                    <span class="s1">y = (y - qy) / </span><span class="s2">35</span><span class="s0">;</span>
                <span class="s1">}</span>

                <span class="s1">ui.ps[ui.i].listx = x</span><span class="s0">;</span>
                <span class="s1">ui.ps[ui.i].listy = y</span><span class="s0">;</span>
                <span class="s1">ui.i++</span><span class="s0">;</span>

                <span class="s3">//判断当前位置有没有棋子</span>
                <span class="s0">if </span><span class="s1">(SaveGame[x][y] == </span><span class="s2">0</span><span class="s1">) {</span>
                    <span class="s1">SaveGame[x][y] = qc</span><span class="s0">;</span>
                    <span class="s1">qn = </span><span class="s2">0</span><span class="s0">;</span>
                <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
                    <span class="s1">qn = </span><span class="s2">1</span><span class="s0">;</span>
                <span class="s1">}</span>

                <span class="s3">//切换棋子</span>
                <span class="s0">if </span><span class="s1">(qn == </span><span class="s2">0</span><span class="s1">) {</span>
                    <span class="s0">if </span><span class="s1">(qc == </span><span class="s2">1</span><span class="s1">) {</span>
                        <span class="s1">qc = </span><span class="s2">2</span><span class="s0">;</span>
                        <span class="s1">go = </span><span class="s4">&quot;轮到白子&quot;</span><span class="s0">;</span>
                    <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
                        <span class="s1">qc = </span><span class="s2">1</span><span class="s0">;</span>
                        <span class="s1">go = </span><span class="s4">&quot;轮到黑子&quot;</span><span class="s0">;</span>
                    <span class="s1">}</span>
                <span class="s1">}</span>

                <span class="s0">this</span><span class="s1">.repaint()</span><span class="s0">; </span><span class="s3">//重新执行一次paint方法</span>

<span class="s3">//                弹出胜利对话框</span>
                <span class="s0">boolean </span><span class="s1">wl = </span><span class="s0">this</span><span class="s1">.WinLose()</span><span class="s0">;</span>
                <span class="s0">if </span><span class="s1">(wl) {</span>
                    <span class="s1">JOptionPane.showMessageDialog(</span><span class="s0">this, </span><span class="s4">&quot;游戏结束，&quot; </span><span class="s1">+ (SaveGame[x][y] == </span><span class="s2">1 </span><span class="s1">? </span><span class="s4">&quot;黑方赢了&quot; </span><span class="s1">: </span><span class="s4">&quot;白方赢了&quot;</span><span class="s1">))</span><span class="s0">; </span><span class="s3">//弹出提示对话框</span>
                    <span class="s1">canplay = </span><span class="s0">false;</span>
                <span class="s1">}</span>

                <span class="s3">//弹出平局对话框</span>
                <span class="s0">if </span><span class="s1">(bq + hq == </span><span class="s2">255</span><span class="s1">) {</span>
                    <span class="s1">JOptionPane.showMessageDialog(</span><span class="s0">this, </span><span class="s4">&quot;游戏结束，平局！&quot;</span><span class="s1">)</span><span class="s0">; </span><span class="s3">//弹出提示对话框</span>
                    <span class="s1">canplay = </span><span class="s0">false;</span>
                <span class="s1">}</span>


<span class="s3">//            System.out.println(1); //测试</span>
            <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
<span class="s3">//            System.out.println(0); //测试</span>
            <span class="s1">}</span>
        <span class="s1">}</span>


        <span class="s3">//实现开始按钮</span>
        <span class="s3">//判断是否点击开始按钮</span>
        <span class="s0">if </span><span class="s1">(e.getX() &gt; bx &amp;&amp; e.getX() &lt; bx + bw &amp;&amp; e.getY() &gt; by &amp;&amp; e.getY() &lt; by + bh) {</span>
            <span class="s3">//判断游戏是否开始</span>
            <span class="s0">if </span><span class="s1">(!canplay) {</span>
                <span class="s3">//如果游戏结束，则开始游戏</span>
                <span class="s1">canplay = </span><span class="s0">true;</span>
                <span class="s1">JOptionPane.showMessageDialog(</span><span class="s0">this, </span><span class="s4">&quot;游戏开始&quot;</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s3">//初始化游戏</span>
                <span class="s1">Initialize()</span><span class="s0">;</span>

                <span class="s0">this</span><span class="s1">.repaint()</span><span class="s0">; </span><span class="s3">//重新执行一次paint方法</span>

            <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
                <span class="s3">//如果游戏进行中，则重新开始</span>
                <span class="s1">JOptionPane.showMessageDialog(</span><span class="s0">this, </span><span class="s4">&quot;重新开始&quot;</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s3">//初始化游戏</span>
                <span class="s1">Initialize()</span><span class="s0">;</span>

                <span class="s0">this</span><span class="s1">.repaint()</span><span class="s0">; </span><span class="s3">//重新执行一次paint方法</span>

            <span class="s1">}</span>
        <span class="s1">}</span>


        <span class="s3">//实现悔棋按钮</span>
        <span class="s3">//判断是否点击悔棋按钮</span>
        <span class="s0">if </span><span class="s1">(e.getX() &gt; bx &amp;&amp; e.getX() &lt; bx + bw &amp;&amp; e.getY() &gt; by + </span><span class="s2">60 </span><span class="s1">&amp;&amp; e.getY() &lt; by + </span><span class="s2">60 </span><span class="s1">+ bh) {</span>
            <span class="s3">//判断游戏是否开始</span>
            <span class="s0">if </span><span class="s1">(canplay) {</span>
                <span class="s3">//遍历棋盘上是否有棋子</span>
                <span class="s0">int </span><span class="s1">z = </span><span class="s2">0</span><span class="s0">;</span>
                <span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s2">0</span><span class="s0">; </span><span class="s1">i &lt; </span><span class="s2">15</span><span class="s0">; </span><span class="s1">i++) {</span>
                    <span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">j = </span><span class="s2">0</span><span class="s0">; </span><span class="s1">j &lt; </span><span class="s2">15</span><span class="s0">; </span><span class="s1">j++) {</span>
                        <span class="s0">if </span><span class="s1">(SaveGame[i][j] != </span><span class="s2">0</span><span class="s1">) {</span>
                            <span class="s1">z++</span><span class="s0">;</span>
                        <span class="s1">}</span>
                    <span class="s1">}</span>
                <span class="s1">}</span>
                <span class="s3">//判断是否有棋子</span>
                <span class="s0">if </span><span class="s1">(z != </span><span class="s2">0</span><span class="s1">) {</span>
                    <span class="s0">int </span><span class="s1">result = JOptionPane.showConfirmDialog(</span><span class="s0">this, </span><span class="s4">&quot;确认要悔棋吗？&quot;</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s0">if </span><span class="s1">(result == </span><span class="s2">0</span><span class="s1">) {</span>
                        <span class="s0">int </span><span class="s1">x = ui.ps[ui.i - </span><span class="s2">1</span><span class="s1">].listx</span><span class="s0">;</span>
                        <span class="s0">int </span><span class="s1">y = ui.ps[ui.i - </span><span class="s2">1</span><span class="s1">].listy</span><span class="s0">;</span>

                        <span class="s0">if </span><span class="s1">(SaveGame[x][y] == </span><span class="s2">0</span><span class="s1">) {</span>
                            <span class="s1">JOptionPane.showMessageDialog(</span><span class="s0">this, </span><span class="s4">&quot;已悔过一次棋了！&quot;</span><span class="s1">)</span><span class="s0">;</span>
                        <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
                            <span class="s0">if </span><span class="s1">(SaveGame[x][y] == </span><span class="s2">1</span><span class="s1">) {</span>
                                <span class="s1">qc = </span><span class="s2">1</span><span class="s0">;</span>
                                <span class="s1">go = </span><span class="s4">&quot;轮到黑子&quot;</span><span class="s0">;</span>
                            <span class="s1">} </span><span class="s0">else if </span><span class="s1">(SaveGame[x][y] == </span><span class="s2">2</span><span class="s1">) {</span>
                                <span class="s1">qc = </span><span class="s2">2</span><span class="s0">;</span>
                                <span class="s1">go = </span><span class="s4">&quot;轮到白子&quot;</span><span class="s0">;</span>
                            <span class="s1">}</span>
                            <span class="s1">SaveGame[x][y] = </span><span class="s2">0</span><span class="s0">;</span>
                            <span class="s1">ui.i--</span><span class="s0">;</span>
                            <span class="s0">this</span><span class="s1">.repaint()</span><span class="s0">;</span>
                        <span class="s1">}</span>

                    <span class="s1">}</span>
                <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
                    <span class="s1">JOptionPane.showMessageDialog(</span><span class="s0">this, </span><span class="s4">&quot;棋盘上已无棋子&quot;</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s1">}</span>

            <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
                <span class="s1">JOptionPane.showMessageDialog(</span><span class="s0">this, </span><span class="s4">&quot;请先开始游戏&quot;</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>


        <span class="s3">//实现认输按钮</span>
        <span class="s3">//判断是否点击认输按钮</span>
        <span class="s0">if </span><span class="s1">(e.getX() &gt; bx &amp;&amp; e.getX() &lt; bx + bw &amp;&amp; e.getY() &gt; by + </span><span class="s2">120 </span><span class="s1">&amp;&amp; e.getY() &lt; by + </span><span class="s2">120 </span><span class="s1">+ bh) {</span>
            <span class="s3">//判断游戏是否开始</span>
            <span class="s0">if </span><span class="s1">(canplay) {</span>
                <span class="s3">//判断是谁认输</span>
                <span class="s0">if </span><span class="s1">(qc == </span><span class="s2">1</span><span class="s1">) {</span>
                    <span class="s1">JOptionPane.showMessageDialog(</span><span class="s0">this, </span><span class="s4">&quot;黑方认输，白方获胜&quot;</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s1">canplay = </span><span class="s0">false;</span>
                <span class="s1">} </span><span class="s0">else if </span><span class="s1">(qc == </span><span class="s2">2</span><span class="s1">) {</span>
                    <span class="s1">JOptionPane.showMessageDialog(</span><span class="s0">this, </span><span class="s4">&quot;白方认输，黑方获胜&quot;</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s1">canplay = </span><span class="s0">false;</span>
                <span class="s1">}</span>
            <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
                <span class="s1">JOptionPane.showMessageDialog(</span><span class="s0">this, </span><span class="s4">&quot;请先开始游戏&quot;</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>


    <span class="s1">}</span>


    <span class="s1">@Override</span><span class="s3">//鼠标抬起</span>
    <span class="s0">public void </span><span class="s1">mouseReleased(MouseEvent e) {</span>

    <span class="s1">}</span>

    <span class="s1">@Override</span><span class="s3">//鼠标进入</span>
    <span class="s0">public void </span><span class="s1">mouseEntered(MouseEvent e) {</span>

    <span class="s1">}</span>

    <span class="s1">@Override</span><span class="s3">//鼠标离开</span>
    <span class="s0">public void </span><span class="s1">mouseExited(MouseEvent e) {</span>

    <span class="s1">}</span>
<span class="s1">}</span>

</pre>
</body>
</html>